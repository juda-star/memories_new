{"ast":null,"code":"import _slicedToArray from\"C:/Users/Yehuda/Desktop/tech career/projects/git/memoriesNew/memories/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import{AppBar,Avatar,Button,Toolbar,Typography}from\"@material-ui/core\";import memoriesText from\"../../images/memoriesText.png\";import memorieslogo from\"../../images/memorieslogo.png\";import{useDispatch}from\"react-redux\";import useStyles from\"./styles\";import decode from'jwt-decode';import Home from\"../Home/Home\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem(\"profile\"))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];console.log(user);var dispatch=useDispatch();var navigate=useNavigate();var location=useLocation();var logout=function logout(){dispatch({type:\"LOGOUT\"});navigate('/');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:classes.brandContainer,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:memoriesText,alt:\"icon\",height:\"45px\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:memorieslogo,alt:\"icon\",height:\"40px\"})]}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:user?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user.result.name,src:user.result.imageUrl,children:user.result.name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,varianth6:\"true\",children:user.result.name}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(Link,{to:\"/auth\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",children:\"Sign In\"})})})]});};export default Navbar;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useLocation","AppBar","Avatar","Button","Toolbar","Typography","memoriesText","memorieslogo","useDispatch","useStyles","decode","Home","Navbar","classes","JSON","parse","localStorage","getItem","user","setUser","console","log","dispatch","navigate","location","logout","type","token","decodedToken","exp","Date","getTime","appBar","brandContainer","image","toolbar","profile","purple","result","name","imageUrl","charAt","userName"],"sources":["C:/Users/Yehuda/Desktop/tech career/projects/git/memoriesNew/memories/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate,useLocation } from \"react-router-dom\";\r\nimport { AppBar, Avatar, Button, Toolbar, Typography } from \"@material-ui/core\";\r\nimport memoriesText from \"../../images/memoriesText.png\";\r\nimport memorieslogo from \"../../images/memorieslogo.png\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport useStyles from \"./styles\";\r\nimport decode from 'jwt-decode'\r\nimport Home from \"../Home/Home\";\r\nconst Navbar = () => {\r\n  const classes = useStyles();\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"profile\")));\r\n  console.log(user);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const logout = () => {\r\n    dispatch({ type: \"LOGOUT\" });\r\n\r\n    navigate('/');\r\n    setUser(null);\r\n  };\r\n  useEffect(() => {\r\n    const token = user?.token;\r\n    if (token) {\r\n      const decodedToken=decode(token)\r\n      if (decodedToken.exp*1000<new Date().getTime()) logout()\r\n    }\r\n\r\n    setUser(JSON.parse(localStorage.getItem('profile')))\r\n  }, [location]);\r\n  return (\r\n    <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\r\n      <Link to=\"/\" className={classes.brandContainer}>\r\n        {/* <Typography\r\n          component={Link}\r\n          to=\"/\"\r\n          className={classes.heading}\r\n          variant=\"h2\"\r\n          align=\"center\"\r\n        >\r\n          Memories\r\n        </Typography> */}\r\n        <img className={classes.image} src={memoriesText} alt=\"icon\" height=\"45px\" />\r\n        <img className={classes.image} src={memorieslogo} alt=\"icon\" height=\"40px\" />\r\n      </Link>\r\n      <Toolbar className={classes.toolbar}>\r\n        {user ? (\r\n          <div className={classes.profile}>\r\n            <Avatar\r\n              className={classes.purple}\r\n              alt={user.result.name}\r\n              src={user.result.imageUrl}\r\n            >\r\n              {user.result.name.charAt(0)}\r\n            </Avatar>\r\n            <Typography className={classes.userName} varianth6=\"true\">\r\n              {user.result.name}\r\n            </Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              className={classes.logout}\r\n              color=\"secondary\"\r\n              onClick={logout}\r\n            >\r\n              Logout\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <Link to=\"/auth\">\r\n            <Button variant=\"contained\" color=\"primary\">\r\n              Sign In\r\n            </Button>\r\n          </Link>\r\n        )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}